(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/meal/orderMeal"],{"0de9":function(e,t,r){"use strict";(function(e){r("7f23");n(r("66fd"));var t=n(r("4eca"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"4eca":function(e,t,r){"use strict";r.r(t);var n=r("c8c6"),a=r("8192");for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);r("bb0f");var c,o=r("f0c5"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);t["default"]=s.exports},"55eb":function(e,t,r){"use strict";(function(e){function r(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=n(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,c=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){o=!0,i=e},f:function(){try{c||null==a.return||a.return()}finally{if(o)throw i}}}}function n(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c={data:function(){return{items:[],checkboxChangeVal:[],checkedArr:[],allChecked:!1,user:e.getStorageSync("user"),menuPrice:0}},onLoad:function(){var t=this;e.request({url:this.$http.contextPath+"/orderMeal/orderList",method:"POST",header:{"Content-Type":"application/json"},data:{elderlyId:this.user.id,organId:this.user.organId},success:function(e){if(1==e.data.status){var r=e.data.data,n=[];r.forEach((function(e){var t=i({id:e.id,price:e.price,menuContent:e.menuContent,url:e.url,weekName:e.weekName+"套餐",orderStatus:e.orderStatus},"price",e.price);n.push(t)})),t.items=n}}})},methods:{orderSingle:function(e,t){this.checkedArr=[],this.checkedArr.push(e),this.createOrder(t)},order:function(){this.createOrder(this.menuPrice)},createOrder:function(t){var r=this;e.request({url:this.$http.contextPath+"consume-order/addSettlementManually",method:"POST",header:{"Content-Type":"application/json"},data:{paymentStatus:0,elderlyName:this.user.userName,organizationId:this.user.organId,paymentType:"account",elderlyId:this.user.id,servicesItemsKind:"HF",servicesItemsKindName:"助餐",paymentTotal:t,paymentSelf:t,subsidyTotal:0,servicesItemsId:28,servicesItemsName:"午餐"},success:function(e){1==e.data.status?r.mealRecord():r.$http.showToastOverride(e.data.msg)}})},mealRecord:function(){var t=this;e.request({url:this.$http.contextPath+"orderMeal/saveMealRecord",method:"POST",header:{"Content-Type":"application/json"},data:{organId:this.user.organId,elderlyId:this.user.id,menuIds:this.checkedArr},success:function(r){1==r.data.status?e.navigateTo({url:"/pages/success/orderMealSuccess"}):t.$http.showToastOverride(r.data.msg)}})},makePhoneCall:function(){e.makePhoneCall({phoneNumber:"13667088868",success:function(e){console.log("拨打成功!")},fail:function(e){console.log("拨打失败或取消拨打!")}})},checkboxChange:function(e){this.checkedArr=e.detail.value,this.menuPrice=0;var t,n=r(this.items);try{for(n.s();!(t=n.n()).done;){var a,i=t.value,c=String(i.id),o=String(i.orderStatus),s=i.price,u=r(this.checkedArr);try{for(u.s();!(a=u.n()).done;){var l=a.value;l==c&&"预约"==o&&(this.menuPrice+=s)}}catch(d){u.e(d)}finally{u.f()}}}catch(d){n.e(d)}finally{n.f()}this.checkedArr.length>0&&this.checkedArr.length==this.items.length?this.allChecked=!0:this.allChecked=!1},checkAll:function(e){var t=e.detail.value;if("all"==t[0]){this.allChecked=!0;var n,a=r(this.items);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=String(i.id),o=String(i.orderStatus),s=i.price;this.checkedArr.includes(c)||"预约"!=o||(this.menuPrice+=s,this.checkedArr.push(c))}}catch(u){a.e(u)}finally{a.f()}}else this.menuPrice=0,this.allChecked=!1,this.checkedArr=[]}}};t.default=c}).call(this,r("543d")["default"])},"5cca":function(e,t,r){},8192:function(e,t,r){"use strict";r.r(t);var n=r("55eb"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},bb0f:function(e,t,r){"use strict";var n=r("5cca"),a=r.n(n);a.a},c8c6:function(e,t,r){"use strict";var n,a=function(){var e=this,t=e.$createElement,r=(e._self._c,e.__map(e.items,(function(t,r){var n=e.checkedArr.includes(String(t.id)),a=String(t.id),i=e.checkedArr.includes(String(t.id));return{$orig:e.__get_orig(t),g0:n,m0:a,g1:i}})));e.$mp.data=Object.assign({},{$root:{l0:r}})},i=[];r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}))}},[["0de9","common/runtime","common/vendor"]]]);